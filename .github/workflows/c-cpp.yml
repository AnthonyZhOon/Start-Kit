name: C/C++ CI


on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Install boost
      uses: MarkusJx/install-boost@v2.4.5
      id: install-boost
      with:
          # REQUIRED: Specify the required boost version
          # A list of supported versions can be found here:
          # https://github.com/MarkusJx/prebuilt-boost/blob/main/versions-manifest.json
          boost_version: 1.80.0
          # OPTIONAL: Specify a platform version
          platform_version: 22.04
          # OPTIONAL: Specify a custom install location
          # boost_install_dir: /home/runner/some_directory
          # OPTIONAL: Specify a toolset
          toolset: gcc
          # OPTIONAL: Specify an architecture
          # arch: x86
    
          # NOTE: If a boost version matching all requirements cannot be found,
          # this build step will fail
    - uses: actions/checkout@v3
    - name: Configure CMake
      run: |
          cmake ./ -DCMAKE_BUILD_TYPE=$BUILD_TYPE -B build -DBoost_INCLUDE_DIR=${{steps.install-boost.outputs.BOOST_ROOT}}/include\ -DBoost_LIBRARY_DIRS=${{steps.install-boost.outputs.BOOST_ROOT}}/lib
      env:
          BOOST_ROOT: ${{ steps.install-boost.outputs.BOOST_ROOT }}
    - name: Run Make
      run: make -C build -j

